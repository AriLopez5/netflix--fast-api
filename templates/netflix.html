{% extends "base.html" %}
{% block content %}
<style>
    .rating {
        display: inline-block;
        padding: 2px 10px;
        border-radius: 20px;
        font-weight: 600;
        font-size: 15px;
    }
    
    .rating-10 { background: #d4edda; color: #155724; }
    .rating-9 { background: #d4edda; color: #155724; }
    .rating-8 { background: #d1f2eb; color: #0c5460; }
    .rating-7 { background: #d1ecf1; color: #0c5460; }
    .rating-6 { background: #fff1c1; color: #856404; }
    .rating-5 { background: #fff1c1; color: #856404; }
    .rating-4 { background: #ffe5d0; color: #856404; }
    .rating-3 { background: #f8d7da; color: #721c24; }
    .rating-2 { background: #f8d7da; color: #721c24; }
    .rating-1 { background: #f8d7da; color: #721c24; }
    .rating-0 { background: #f8d7da; color: #721c24; }
    .rating-na { background: #e9ecef; color: #6c757d; }
</style>

<div>
    <h1>Colecci√≥n de Netflix</h1>
    
    <!-- Tabla de Pel√≠culas -->
    <h2 style="color: #667eea; margin-top: 30px; margin-bottom: 15px;">üé¨ Pel√≠culas</h2>
    <table>
        <thead>
            <tr>
                <th>Nombre</th>
                <th>G√©nero</th>
                <th>Calificaci√≥n</th>
            </tr>
        </thead>
        <tbody>
            {% set peliculas = archivos|selectattr("tipo", "equalto", "Pel√≠cula")|list %}
            {% if peliculas %}
                {% for movie in peliculas %}
                <tr>
                    <td>{{ movie.nombre }}</td>
                    <td>{{ movie.genero or 'N/A' }}</td>
                    <td>
                        {% if movie.calificacion_media is not none %}
                            {% set rating_class = "rating-" ~ (movie.calificacion_media|int) %}
                            <span class="rating {{ rating_class }}">{{ movie.calificacion_media }}</span>
                        {% else %}
                            <span class="rating rating-na">N/A</span>
                        {% endif %}
                    </td>
                </tr>
                {% endfor %}
            {% else %}
                <tr>
                    <td colspan="3" class="empty">No hay pel√≠culas registradas</td>
                </tr>
            {% endif %}
        </tbody>
    </table>

    <!-- Tabla de Series -->
    <h2 style="color: #667eea; margin-top: 40px; margin-bottom: 15px;">üì∫ Series</h2>
    <table>
        <thead>
            <tr>
                <th>Nombre</th>
                <th>G√©nero</th>
                <th>Calificaci√≥n</th>
            </tr>
        </thead>
        <tbody>
            {% set series = archivos|selectattr("tipo", "equalto", "Serie")|list %}
            {% if series %}
                {% for movie in series %}
                <tr>
                    <td>{{ movie.nombre }}</td>
                    <td>{{ movie.genero or 'N/A' }}</td>
                    <td>
                        {% if movie.calificacion_media is not none %}
                            {% set rating_class = "rating-" ~ (movie.calificacion_media|int) %}
                            <span class="rating {{ rating_class }}">{{ movie.calificacion_media }}</span>
                        {% else %}
                            <span class="rating rating-na">N/A</span>
                        {% endif %}
                    </td>
                </tr>
                {% endfor %}
            {% else %}
                <tr>
                    <td colspan="3" class="empty">No hay series registradas</td>
                </tr>
            {% endif %}
        </tbody>
    </table>

    <p style="margin-top: 30px; color: #666; text-align: center;">
        Total: {{ peliculas|length }} pel√≠culas y {{ series|length }} series
    </p>
</div>
{% endblock %}